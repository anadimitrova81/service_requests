# Omakase Ruby styling for Rails
inherit_gem: { rubocop-rails-omakase: rubocop.yml }

AllCops:
  NewCops: enable
  TargetRubyVersion: 3.3
  Exclude:
    - "bin/**/*"
    - "db/schema.rb"
    - "node_modules/**/*"
    - "tmp/**/*"
    - "vendor/**/*"
    - "app/views/**/*.erb"

# ── Layout ──────────────────────────────────────────────

Layout/LineLength:
  Max: 120
  AllowedPatterns:
    - "^\\s*#"

Layout/MultilineMethodCallIndentation:
  EnforcedStyle: indented

Layout/FirstArrayElementIndentation:
  EnforcedStyle: consistent

Layout/FirstHashElementIndentation:
  EnforcedStyle: special_inside_parentheses

Layout/IndentationConsistency:
  EnforcedStyle: normal
  AutoCorrect: always

Layout/IndentationWidth:
  Width: 2
  AutoCorrect: always

Layout/EmptyLinesAroundBlockBody:
  Enabled: false

Layout/EmptyLinesAroundClassBody:
  Enabled: false

# ── Style ───────────────────────────────────────────────

Style/FrozenStringLiteralComment:
  Enabled: false

Style/StringLiterals:
  EnforcedStyle: double_quotes

Style/StringLiteralsInInterpolation:
  EnforcedStyle: double_quotes

Style/TrailingCommaInArrayLiteral:
  EnforcedStyleForMultiline: consistent_comma

Style/TrailingCommaInHashLiteral:
  EnforcedStyleForMultiline: consistent_comma

Style/TrailingCommaInArguments:
  EnforcedStyleForMultiline: no_comma

Style/SymbolArray:
  EnforcedStyle: brackets

Style/WordArray:
  EnforcedStyle: brackets

Style/Documentation:
  Enabled: false

Style/ClassAndModuleChildren:
  Enabled: false

Style/Lambda:
  EnforcedStyle: literal

Style/BlockDelimiters:
  EnforcedStyle: braces_for_chaining

Style/HashSyntax:
  EnforcedShorthandSyntax: never

Style/EmptyMethod:
  EnforcedStyle: compact

Style/IfUnlessModifier:
  Enabled: false

Style/GuardClause:
  Enabled: false

# ── Metrics ─────────────────────────────────────────────

Metrics/MethodLength:
  Max: 20

Metrics/ClassLength:
  Max: 150

Metrics/BlockLength:
  Exclude:
    - "config/routes.rb"
    - "config/environments/*.rb"
    - "spec/**/*"
    - "test/**/*"
    - "db/migrate/*.rb"

Metrics/AbcSize:
  Max: 25

# ── Naming ──────────────────────────────────────────────

Naming/PredicatePrefix:
  Enabled: false

Naming/VariableNumber:
  EnforcedStyle: snake_case
  AllowedPatterns:
    - "address_line_\\d+"

# ── Rails ───────────────────────────────────────────────

Rails/HasManyOrHasOneDependent:
  Enabled: false

Rails/InverseOf:
  Enabled: false

Rails/LexicallyScopedActionFilter:
  Enabled: false

Rails/I18nLocaleTexts:
  Enabled: false

Rails/OutputSafety:
  Enabled: true

Rails/SkipsModelValidations:
  Enabled: true
  AllowedMethods:
    - "touch"
    - "increment!"
    - "decrement!"

Rails/UnknownEnv:
  Environments:
    - production
    - development
    - test

